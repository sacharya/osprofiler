#General app configurables

agents:
  - plugin: osprofiler.plugins.mysql.Mysql
    # Metrics will be named testcloud.mysql.rest.of.metric
    prefix: testcloud
    name: "mysql"
    auth:
      username: "root"
      password: "admin"
    sample_interval: 5
    handlers: blueflood

  - plugin: osprofiler.plugins.events.Events
    prefix: testcloud
    name: "events"
    metrics:
      - num_requests
      - num_connections
    auth:
      username: "guest"
      password: "guest"
    sample_interval: 0.3
    handlers: elastic

  - plugin: osprofiler.plugins.system.System
    # Metrics will be named testcloud.system.rest.of.metric
    prefix: testcloud
    name: "system"
    sample_interval: 5
    handlers: blueflood

  - plugin: osprofiler.plugins.process.Process
    # Metrics will be named testcloud.process.rest.of.metric
    prefix: testcloud
    name: process
    # Optionally include certain processes. Default is to include all
    filters:
      - nova
    # Optionally include certain metrics. Default is to include all
    # metrics:
    #  - cpu
    #   - memory
    #   - network
    sample_interval: 5
    handlers: blueflood

# The backend that will recieve metrics generated by the agents
backend:

  - plugin: osprofiler.handlers.blueflood.BluefloodHandler
    name: "blueflood"
    batch_size: 1000
    workers: 1
    auth:
      username: "yourusername"
      apikey: "yourapikey"
      auth_url: "https://identity.api.rackspacecloud.com/v2.0/"

  - plugin: osprofiler.handlers.elastic.ElasticSearchHandler
    name: "elastic"
    host: 192.168.4.36
    batch_size: 100
    workers: 1
    index_prefix: testcloud
    index_type: event
